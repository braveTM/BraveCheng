function sltdata(){}sltdata.prototype={slt_content:'<div class="cards_cover slt_card" id="{id}" style="display: block; "><div class="select_bg bcard_data"><div class="bc_item"><div class="top"><p class="lf"></p><p class="rf"></p></div><a href="javascript:;" class="close_slt" title="取消"></a><div class="middle"><div class="mbg"><div class="title">{title}</div><div class="slt_items"></div><div class="slt_cat lf">{slt_cat}</div><div class="slt_citm lf"><p class="clr"></p></div><p class="clr"></p><div class="next"><span class="gray">若您误选,再点击一次即可取消选择</span><div class="btn_common btn3_hov"><span class="b_lf"></span><span class="b_rf"></span><a href="javascript:;" class="btn jnext blue">确&nbsp;&nbsp;定</a></div></div></div></div><div class="bot"><p class="lf"></p><p class="rf"></p></div></div></div></div>',slt_title:'<span>请选择{title}类别:</span><span class="rf">{tip}</span>',col:'<div class="col {fst}">{items}</div>',GetCats:function(){var b={url:WEBURL.GetPJobs,params:""};var a=HGS.Base.HAjax(b,false);a=(typeof(a)=="undefined"?[]:a);if(!a.ret){a.data=[]}return a.data},GetCatCdr:function(a){var c={url:WEBURL.GetCJobs,params:"pid="+a};var b=HGS.Base.HAjax(c,false);b=(typeof(b)=="undefined"?[]:b);if(!b.ret){b.data=[]}return b.data}};(function(a){a.extend(a.fn,{hgsSlt:function(d){var c=new sltdata();var f={id:"jobslt",title:"职位",tip:"至多可选择5个",data:[c.GetCats,c.GetCatCdr],col_num:3,max_slt:5,cur_lv:1,single:false,limit:true,sure:null};var e=a.extend(f,d);var g=this;var b={_thatBind:function(){a(g).unbind("click").bind("click",function(){b._iniSlt()})},_close:function(){var h=a("#"+e.id);h.find("a.close_slt").click(function(){h.fadeOut()})},_iniBtn:function(){var h=baseController;h.BtnBind("#"+e.id+" div.btn_common","btn3","btn3_hov","btn3_click")},_BtnClick:function(){a("#"+e.id+" div.btn_common a.jnext").click(function(){b._doResult()})},_iniSltItem:function(){var k=a(g);var j=k.attr("cids").split(",");var m=k.attr("pids").split(",");var l=k.attr("names").split(",");var i=a("#"+e.id);var h="";i.find("div.slt_citm div.col a.cur_a").removeClass("cur_a");i.find("div.slt_items").html("");if(j[0]!=""){a.each(j,function(n,p){h+='<a href="javascript:;" cid="'+p+'" pid="'+m[n]+'">'+l[n]+"</a>"});i.find("div.slt_items").append(h);b._delSltItemClick(i.find("div.slt_items a"))}},_iniSlt:function(){if(!a.fn.hgsSlt.defaults.stopevent){if(this._genSlt()){this._iniCatClick();this._close();this._iniBtn();this._BtnClick()}this._iniSltItem()}},_doResult:function(){var m=e;var k=a("#"+e.id);var j=k.find("div.slt_items a");var n="",h="",i="";a.each(j,function(p,r){var q=a(r);if(p>0){n+=","+q.attr("cid");h+=","+q.attr("pid");i+=","+q.text()}else{n=a(r).attr("cid");h=q.attr("pid");i=q.text()}});var l={cid:n,pid:h,name:i,jhtml:k.find("div.slt_items").html(),obj:g};k.fadeOut();a(g).attr("cids",l.cid);a(g).attr("pids",l.pid);a(g).attr("names",l.name);m.sure(l)},_genSlt:function(){var l=e;var i=c;var k=a("#"+l.id);if(k.length==0){var j=i.slt_content;var h=this._genCat();j=j.replace("{id}",l.id).replace("{title}",i.slt_title.replace("{title}",l.title).replace("{tip}",l.tip)).replace("{slt_cat}",h);a("body").append(j);return true}else{k.fadeIn(30)}return false},_genCat:function(){var i=e.data[0]();var h="";a.each(i,function(j,k){h+='<p><a href="javascript:;" class="cat_a" cid="'+k.id+'">'+k.name+'</a><a href="javascript:;" class="tri"></a></p>'});return h},_genCatCdr:function(h){var l=e.data[e.cur_lv](h);var j="",i=c.col;if(e.limit){j='<a href="javascript:;" cid="'+h+'" class="nolimit">不限</a>'}a.each(l,function(m,n){j+='<a href="javascript:;" cid="'+n.id+'">'+n.name+"</a>"});j=i.replace("{fst}","col_fst col_"+e.col_num).replace("{items}",j)+"</div><p class='clr'></p>";var k=a("#"+e.id);k.find("div.slt_citm div.col:eq("+(e.cur_lv-1)+")").remove();k.find("div.slt_citm").html(j)},_catClick:function(){var h=a("#"+e.id);h.find("div.slt_cat p").unbind("click").bind("click",function(){a(this).parent().find("p.cur_p").removeClass("cur_p");a(this).addClass("cur_p");var i=a(this).find("a.cat_a").attr("cid");e.cur_lv=1;b._genCatCdr(i);b._itemClick()})},_iniCatClick:function(){this._catClick();a("#"+e.id).find("div.slt_cat p:eq(0)").trigger("click")},_genSltItems:function(l,i){var k=a("#"+e.id);if(k.find("div.slt_items a[cid='"+l+"']").length==0){var h=k.find("div.slt_cat p.cur_p a.cat_a");var j='<a href="javascript:;" cid="'+l+'" pid="'+h.attr("cid")+'">'+h.text()+" - "+i+"</a>";k.find("div.slt_items").append(j);b._delSltItemClick(k.find("div.slt_items a:last-child"))}},_delSltItemClick:function(h){a(h).click(function(){var i=a(this).attr("cid");b._delSltItems(i);a("#"+e.id).find("div.slt_citm div.col a[cid='"+i+"']").trigger("click")})},_delSltItems:function(h){a("#"+e.id).find("div.slt_items a[cid='"+h+"']").remove()},_itemClick:function(){var h=a("#"+e.id);h.find("div.slt_citm div.col a").unbind("click").bind("click",function(){e.cur_lv=a(this).parent().parent().index()+2;var l=false,j=a(this).hasClass("nolimit");var k=a(this).attr("cid");if(a(this).hasClass("cur_a")){a(this).removeClass("cur_a");b._delSltItems(k)}else{if(e.single||j){a(this).parent().parent().find("a.cur_a").removeClass("cur_a");a(this).addClass("cur_a");h.find("div.slt_items a").remove();if(j){h.find("div.slt_items a:not([pid!='"+h.find("div.slt_cat p.cur_p a.cat_a").attr("cid")+"'])").remove()}l=true}else{var i=a(this).parent().parent().find("a.nolimit");if(i.hasClass("cur_a")){h.find("div.slt_items a[cid='"+i.attr("cid")+"']").remove();i.removeClass("cur_a")}}if(!e.single){if(h.find("div.slt_items a").length<e.max_slt){a(this).addClass("cur_a");l=true}else{alert("至多能选"+e.max_slt+"个!");l=false}}if(l){b._genSltItems(a(this).attr("cid"),a(this).text())}else{if(a(this).hasClass("cur_a")){a(this).removeClass("cur_a")}}}})}};b._thatBind()}});a.fn.hgsSlt.defaults={stopevent:false}})(jQuery);
function Mask(){}Mask.prototype={slt_content:'<div class="cards_cover slt_card" id="{id}"><div class="select_bg bcard_data"><div class="bc_item"><div class="top"><p class="lf"></p><p class="rf"></p></div><a href="javascript:;" class="close_slt" title="取消"></a><div class="middle"><div class="mbg">{content}{btn}</div></div><div class="bot"><p class="lf"></p><p class="rf"></p></div></div></div></div>',slt_email:'<div class="cards_cover slt_card" id="{id}"><div class="select_bg ewt align_m"><div class="ewraper"><div class="etop"></div><a href="javascript:;" class="close_slt blue" title="关闭">关闭</a><div class="mect"><div class="ebg"><table class="eb"><tr><td class="ltd ltop"><span>收件人：</span></td><td><div class="slt_items"></div><input type="hidden" name="ids" /></td></tr><tr><td class="ltd ltop"><span>主题：</span></td><td><div class="tm"><input type="text" class="tbox" /></div></td></tr><tr><td class="ltd ltop"><span>内容：</span></td><td><div class="tm"><textarea class="cin mail_detail"></textarea></div></td></tr></table><span class="red lf error"></span><div class="sv_res save btn_common btn4_common btn4"><span class="b_lf"></span><span class="b_rf"></span><a href="javascript:;" id="send_mail" class="btn  jnext white">发送</a></div><div class="clr"></div></div></div></div></div></div>',mod_hm:'<div class="m_wrap">添加人才资源</div><div class="mitem"><span class="gray name cmon">人才姓名：</span><span><input type="text" class="rname cbox" /></span></div><div class="mitem"><span class="gray cmon">客户来源：</span><span><select id="perid1"><option value="1">职讯网</option><option value="2">电话来访</option><option value="3">客户介绍</option><option value="4">独立开发</option><option value="5">魅力宣传</option><option value="12">其他</option><option value="6">促销活动</option><option value="7">老客户</option><option value="8">代理商</option><option value="9">合作伙伴</option><option value="10">公开招标</option><option value="11">其他网站</option></select></span></div>',mod_cm:'<div class="m_wrap">添加企业资源</div><div class="mitem"><span class="gray cmon">企业名称：</span><span><input type="text" class="cname cbox" /></span></div><div class="mitem"><span class="gray cmon">联系人：</span><span><input type="text" class="contacter cbox" /></span></div><div class="mitem"><span class="gray cmon">客户来源：</span><span><select id="perid2"><option value="1">职讯网</option><option value="2">电话来访</option><option value="3">客户介绍</option><option value="4">独立开发</option><option value="5">魅力宣传</option><option value="12">其他</option><option value="6">促销活动</option><option value="7">老客户</option><option value="8">代理商</option><option value="9">合作伙伴</option><option value="10">公开招标</option><option value="11">其他网站</option></select></span></div>',mod_import:'<div class="import"><div class="upfile_l"><div class="title">导入{h_e}资源</div><div class="upfile_button"><div class="up_button"><span class="b_lf"></span><span class="b_rf"></span><form action="{url}" method="POST" target="{iframe_id}"  enctype="multipart/form-data" id="{formid}"><a href="javascript:;" class="btn blue" datacont="" id="sendmsgtozx">资源文件导入<input type="file" name="upfile" size="0" class="upcvsfile"/><input type="hidden" name="att_name" size="0" value="{att_name}" class="upcvsfile"/></a></form><iframe id="{iframe_id}" name="{iframe_id}" src="about:blank" style="display:none"></iframe></div><div class="notemsg"></div></div></div><div class="notemsg">提示：目前仅支持职讯提供的资源模板导入资源，请下载模板文件并录入准确的数据后导入。</div><div class="download_r"><div class="downloadfile_button"><div class="down_button"><span class="b_lf"></span><span class="b_rf"></span><a href="{url_xls}" class="btn blue" datacont="" id="downloadcvs">下载模板文件</a></div></div></div><span id="notetxt" class="notetext red hidden">文件格式不正确，请选择csv或xls文件。</span><span id="error" class="notetext red"></span></div>',mod_upfile:'<span>选择文件类型:</span><span class="gray">支持PDF文档、JPG、JPEG、PNG图片(最大不超过2M)</span><form action="{url}" method="POST" target="Upfiler_file_iframe"  enctype="multipart/form-data" id="{formid}"><div class="upfile_detail"><div class="select_type"><a href="javascript:;" cid="4" class="">资历证件</a><a href="javascript:;" cid="1" class="selected">身份证件</a><a href="javascript:;" cid="3" class="">合同文件</a><a href="javascript:;" cid="9" class="">其它文件</a></div><div class="upfile_button"><div class="up_button"><span class="b_lf"></span><span class="b_rf"></span><a href="javascript:;" class="btn blue" datacont="" id="sendmsgtozx">浏览文件<input type="hidden" name="{user_type}" value="{user_id}"><input type="hidden" name="att_name" value="{att_name}"><input type="hidden" name="identifier" value="{identifier}"><input type="file" name="upfile" size="0" class="d_upfile"/><input type="hidden" name="att_type_id" /></a></div></div></div></form><iframe id="Upfiler_file_iframe" name="Upfiler_file_iframe" src="about:blank" style="display:none"></iframe><div class="notemsg"></div>',btn_md:'<div class="next"><span class="red  error"></span><div class="sv_res rf"><a href="javascript:;" class="btn jnext blue">创建档案</a></div></div>'};(function(a){a.extend(a.fn,{hmark:function(c){var b=new Mask();var f={id:"jobslt",cont:null,type:"1",url:"",param:null,suc:null,fail:null,checknul:null,iniSltFun:function(){},delitBack:null};var e=a.extend(f,c);var g=this;var d=null;var h={_thatBind:function(){a(g).unbind("click").bind("click",function(){h._iniSlt(a(this))})},_close:function(){var i=a("#"+e.id);i.find("a.close_slt").click(function(){i.find("input[type='text'],textarea").val("");i.find("span.error").text("");i.find("div.slt_items").find("a").remove();i.fadeOut()})},_iniBtn:function(){var i=baseController;i.BtnBind("#"+e.id+" div.btn_common","btn4","btn4_hov","btn4_click")},_BtnClick:function(){a("#"+e.id+" div.sv_res a.jnext").click(function(){h._doResult()})},_IniUpCvsfile:function(){if(!a("#notetxt").hasClass("hidden")){a("#notetxt").addClass("hidden")}if(!a("#error").hasClass("hidden")){a("#error").addClass("hidden")}},_BtnUpCvsfile:function(){var j=a("#"+e.p.formid).parent().next(".notemsg");var i=a("#"+e.id).children().children().find("a.close_slt");a("#"+e.id+" input.upcvsfile").bind("change",function(){var k=a(this).val();if(/^.*?\.(csv|xls)$/i.test(k)){j.removeClass("red");h._IniUpCvsfile();j.html(COMMONTEMP.T0030);a("#"+e.p.formid).submit();i.unbind().bind("click",function(){location.reload()})}else{h._IniUpCvsfile();j.addClass("red");j.html("文件格式不正确，请选择csv或xls文件。")}})},_BtnUpfile:function(k){var l=a("#"+e.retemp.formid).next().next(".notemsg");var j=e.retemp.ftype(k);var i=a("#file_type option[value='"+j+"']");i.attr("selected","true");l.html("");h._UpfileBindSub(l)},_UpfileBindSub:function(l){var j=a("#"+e.retemp.formid).find(".select_type");var i=1;var k=true;k=h._CheckFileNum(i,l);j.children("a").unbind("click").bind("click",function(){a(this).parent().find("a").removeClass("selected");a(this).addClass("selected");i=a(this).attr("cid")*1;k=h._CheckFileNum(i,l)});a("#"+e.id+" input.d_upfile").unbind("change").bind("change",function(){var n=a(this).val();if(/^.*?\.(xls|docx|txt|doc|gif|png|jpg|jpeg|bmp|pdf)$/i.test(n)){var m=a(this).prevAll("input[name='att_name']");m.val(n);a(this).next().val(i);if(k){l.removeClass("red");a("#upfile").submit();l.html(COMMONTEMP.T0030);var o=a("#"+e.id).children().children().find("a.close_slt");o.unbind().bind("click",function(){location.reload()})}}else{l.addClass("red");l.html("格式不正确，请重新选择文件。")}})},_CheckFileNum:function(j,k){var l=null;if(j==1){l=a("#b_id")}else{if(j==3){l=a("#c_id")}else{if(j==4){l=a("#a_id")}else{if(j==9){l=a("#d_id")}}}}var i=l.children("div.m_file").length;if(i>=5){k.addClass("red");k.html("当前文件类型数量已达上限!");return false}else{k.removeClass("red");k.html("");return true}},_iniSlt:function(i){if(!a.fn.hmark.defaults.stopevent){if(this._genSlt(i)){this._close();this._iniBtn();this._BtnClick();if(e.type==4){this._BtnUpCvsfile()}else{if(e.type==5){this._BtnUpfile(i)}}}}},_doResult:function(){var l=e;var j=a("#"+l.id);var i=e.checknul();if(i==true){var m={url:l.url,params:l.param(),sf:l.suc,ff:l.fail};var k=HGS.Base.HAjax(m,false);k=(typeof(k)=="undefined"?[]:k);if(!k.ret){l.fail(k.data)}else{j.fadeOut();l.suc(k.data)}}else{j.find("span.error").text("");j.find("span.error").text(i)}},_genTemp0:function(){var l=e;var i=b;var k="";var j="";var m="";k=i.slt_content;j=i.mod_hm;m=i.btn_md;k=k.replace("{id}",l.id).replace("{content}",j).replace("{btn}",m);return k},_genTemp1:function(){var l=e;var i=b;var k="";var j="";var m="";k=i.slt_content;j=i.mod_cm;m=i.btn_md;k=k.replace("{id}",l.id).replace("{content}",j).replace("{btn}",m);return k},_genTemp2:function(){var l=e;var i=b;var k="";var j="";var m="";k=i.slt_email;k=k.replace("{id}",l.id).replace("{content}",j).replace("{btn}",m);return k},_genTemp3:function(){var m=e;var i=b;var l="";var k="";var n="";l=i.slt_content;var j=i.mod_import;a.each(m.p,function(p,q){j=j.replace("{"+p+"}",q)});j=j.replace("{iframe_id}",m.p.iframe_id).replace("{iframe_id}",m.p.iframe_id);k=j;l=l.replace("{id}",m.id).replace("{content}",k).replace("{btn}",n);return l},_genTemp4:function(){var m=e;var i=b;var l="";var k="";var n="";l=i.slt_email;l=i.slt_content;var j=i.mod_upfile;a.each(m.retemp,function(p,q){j=j.replace("{"+p+"}",q)});k=j;l=l.replace("{id}",m.id).replace("{content}",k).replace("{btn}",n);return l},_bdDeleitem:function(){a("#"+e.id+" div.slt_items a").unbind("click").bind("click",function(){if(a(this).parent().children().length>1){a(this).remove();e.delitBack(a(this).attr("rel"))}else{alert("至少有一个收件人")}})},_genNames:function(k){var j=a("#"+e.id+" div.slt_items");j.html("");var i="";a.each(k,function(l,m){i+='<a href="javascript:;" title="'+m.name+'" rel="'+m.id+'">'+m.name+"</a>"});j.html(i);h._bdDeleitem()},_genSlt:function(m){var n=e;var o=true;var k="";var l=a("#"+n.id);var j=n.type;if(l.length==0){if(j=="1"){k=h._genTemp0()}else{if(j=="2"){k=h._genTemp1()}else{if(j=="3"){k=h._genTemp2()}else{if(j=="4"){k=h._genTemp3()}else{if(j=="5"){k=h._genTemp4()}}}}}a("body").append(k);l=a("#"+n.id);o=false}if(j=="3"){var i=n.iniSltFun();if(i.ret){h._genNames(i.data);l.fadeIn(30)}else{alert("未选择收件人!");o=false}}else{if(j==4){h._IniUpCvsfile();l.fadeIn(30)}else{if(j==5){h._BtnUpfile(m);l.fadeIn(30)}else{l.fadeIn(30)}}}if(o){return false}return true}};h._thatBind()}});a.fn.hmark.defaults={stopevent:false}})(jQuery);
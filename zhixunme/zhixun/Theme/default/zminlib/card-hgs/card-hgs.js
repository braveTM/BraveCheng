(function(a){a.extend({hgsGenCardCover:function(b){var f={id:"",url:"",btnfunc:a.hgsBtnBind};var e=a.extend(f,b);if(a("#"+e.id).length==0){var c='<div class="cards_cover res_card" id="'+e.id+'"><div class="card_header"><div class="c_h_cont"><div class="c_h_l lf"><a href="javascript:;" class="card_close" title="关闭"></a><a href="javascript:;" class="card_close closetxt" title="关闭">返回</a></div><div class="c_h_r rf"><span class="gray des">亲, 勾选卡片左侧为蓝色,可多选投递哦!</span><div class="btn_cont"><div class="btn_common btn8"><span class="b_lf"></span><span class="b_rf"></span><a href="javascript:;" class="btn white" id="card_sendRes">立即投递简历</a></div></div></div><p class="clr"></p></div></div><div class="select_bg" id="card_data"></div></div>';a("body").append(c);var d=a("#"+e.id);d.find("a.card_close").unbind("click").bind("click",function(){d.fadeOut()});d.find("div.c_h_l span").unbind("click").bind("click",function(){a(this).parent().find("span").removeClass("red");a(this).addClass("red")});e.btnfunc(d.find("div.btn8"),e.url)}},hgsBtnBind:function(c,b){baseController.BtnUnbind(c);baseController.BtnBind(c,"btn8"," btn8_hov","btn8_click");a("#card_sendRes").unbind("click").click(function(){paytipController.ASendResumesTip(a.hgsASendResumes,[this,b],this)})},hgsASendResumes:function(h){var g=h[0],b=h[1];var d=a(g).data("jid");var f=a("div#card_data div.card_col div.card div.middle a.rightpic");var c="";a.each(f,function(j,k){if(a(k).hasClass("hovered")){if(c!=""){c+=","+a(k).attr("rid")}else{c+=a(k).attr("rid")}}});var e={url:b,params:"job_id="+d+"&&resume_ids="+c,sucrender:a.hgsSendSuc,failrender:a.hgsSendFail};HGS.Base.HAjax(e)},hgsCheckBind:function(){a("div.cards_cover a.rightpic").unbind("click").bind("click",function(){if(a(this).hasClass("hovered")){a(this).removeClass("hovered")}else{a(this).addClass("hovered")}})},hgsSendFail:function(b){if(b.data=="YEBZ0001"){paytipController.NoScore()}else{alert(b.data)}},hgsSendSuc:function(b){alert("投递成功");a("div.cards_cover").fadeOut(200)}});a.extend({hgsGenJobCardCover:function(b){var f={id:"",url:"",btnfunc:a.hgsJobBtnBind};var e=a.extend(f,b);if(a("#"+e.id).length==0){var c='<div class="cards_cover job_card" id="'+e.id+'"><div class="card_header"><div class="c_h_cont"><div class="c_h_l lf"><a href="javascript:;" class="card_close" title="关闭"></a><a href="javascript:;" class="card_close closetxt" title="关闭">返回</a><span class="gray">请选择职位，以便邀请简历至合适的职位</span></div><div class="c_h_r rf"><span class="gray">亲, 勾选卡片左侧为蓝色,可多选投递哦!</span><div class="btn_cont"><div class="btn_common btn8"><span class="b_lf"></span><span class="b_rf"></span><a href="javascript:;" class="btn white" id="card_sendtojob">立即邀请简历</a></div></div></div><p class="clr"></p></div></div><div class="select_bg" id="card_jobdata"></div></div>';a("body").append(c);var d=a("#"+e.id);d.find("a.card_close").unbind("click").bind("click",function(){d.fadeOut()});e.btnfunc(d.find("div.btn8"),e.url)}},hgsJobBtnBind:function(c,b){baseController.BtnBind(c,"btn8"," btn8_hov","btn8_click");a("#card_sendtojob").unbind("click").bind("click",function(){paytipController.VisitResumesTip(a.hgsVisitResume,[this,b],this)})},hgsVisitResume:function(h){var g=h[0],b=h[1];var e=a(g).data("rid");var f=a("div#card_jobdata div.card_col div.card div.middle a.rightpic");var c="";a.each(f,function(j,k){if(a(k).hasClass("hovered")){c=a(k).attr("jid");return false}});var d={url:b,params:"jid="+c+"&&rid="+e,sucrender:a.hgsJobSendSuc,failrender:a.hgsSendFail};HGS.Base.HAjax(d)},hgsJobSendSuc:function(b){alert("邀请简历成功");a("div.cards_cover").fadeOut(200)},hgsSCheckBind:function(){a("div.cards_cover a.rightpic").unbind("click").bind("click",function(){a("div.cards_cover a.rightpic").removeClass("hovered");if(a(this).hasClass("hovered")){a(this).removeClass("hovered")}else{a(this).addClass("hovered")}})}});a.extend(a.fn,{hgsShowCard:function(c){var e={accurl:"",dataurl:"",getcat:null,getjid:null,cat:""};var d=a.extend(e,c);var f=this;var b={_showCard:function(){if(a("div.res_card").length==0){a.hgsGenCardCover({id:"card_defualt",url:d.accurl})}}};a(f).unbind("click").bind("click",function(){b._showCard();var h=d.getjid(this);a("#card_sendRes").data("jid",h);var g=d.getcat(this);d.cat=g;f.hgsGetCards(g,d.dataurl)})},hgsGenCards:function(k){var r=document.body.clientWidth;var f="",l=2,e=k.data,m=e.length;var d=0;if(r<1475){f='<div class="card_col card_col1 hgstemp" id="card_col1"></div><div class="card_col card_col2 hgstemp" id="card_col2"></div>'}else{f='<div class="card_col card_col1 hgstemp" id="card_col1"></div><div class="card_col card_col2 hgstemp" id="card_col2"></div><div class="card_col card_col3 hgstemp" id="card_col3"></div>';l=3}a("#card_data").html(f+"<p class='clr'></p>");a("#card_data").css("width",(l*495-10)+"px");d=m/l;var j=[];j[0]='<div class="card"><p class="top"></p><div class="middle"><a href="javascript:;" class="rightpic" rid="{resume_id}"></a><em class="identpic {ident}"></em><p><a href="javascript:;" class="blue">{name}</a><span class="gray"> (简历委托于 {delegate_datetime})</span></p><p><span class="gray">期望注册地: </span><span>{register_place}</span></p>{cert}</div><p class="bot"></p></div>';j[1]='<div class="card"><p class="top"></p><div class="middle"><a href="javascript:;" class="rightpic" rid="{resume_id}"></a><em class="identpic {ident}"></em><p><a href="javascript:;" class="blue">{name}</a><span class="gray"> (简历委托于 {delegate_datetime})</span></p><p><span class="gray">求职岗位: </span><span>{job_name}</span></p><p><span class="gray">期望工作地点: </span><span>{job_addr}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="gray">工作年限: </span><span>{work_exp}</span></p>{cert}</div><p class="bot"></p></div>';var i=[],h=[],g=[],q=0,p=0,o=0;a.each(e,function(c,u){a("div.res_card").fadeIn(200);var t="";var s=u.job_category;var b=u.type;if(s=="1"){u.temp=1}else{u.temp=0}if(typeof(u.RC_list)=="undefined"){u.RC_list=[]}a.each(u.RC_list,function(v,w){t+="<p>"+w+"</p>"});u.cert=t;if(b==2){u.ident="person"}else{u.ident=""}if(c<d){i[q]=u;q++}else{if(c<d*2){h[p]=u;p++}else{if(c<d*3){g[o]=u;o++}}}});var n=[];n[0]=["name","delegate_datetime","cert","register_place","resume_id","ident"];n[1]=["name","delegate_datetime","cert","job_addr","resume_id","work_exp","job_name","ident"];HGS.Base.GenMTemp("card_col1",n,i,j);HGS.Base.GenMTemp("card_col2",n,h,j);HGS.Base.GenMTemp("card_col3",n,g,j);a.hgsCheckBind();a("div#card_data div.card_col div.card div.middle a.rightpic:eq(0)").addClass("hovered")},hgsGetCards:function(b,d){var c=this;var e={url:d,params:"page=1&&size=20&&job_category="+b,sucrender:c.hgsGenCards,failrender:c.hgsGetCardsFail};HGS.Base.HAjax(e)},hgsGetCardsFail:function(b){alert("对不起,您暂时没有可以投递的简历")}});a.extend(a.fn,{hgsShowJobCard:function(c){var e={accurl:"",dataurl:"",getcat:null,getrid:null,cat:""};var d=a.extend(e,c);var f=this;var b={_showCard:function(){if(a("div.job_card").length==0){a.hgsGenJobCardCover({id:"card_jobs",url:d.accurl})}}};a(f).unbind("click").bind("click",function(){b._showCard();a("#card_jobs div.card_header div.c_h_r>span.gray").html("亲, 勾选卡片左侧为蓝色,职位选择为单选哦!");var h=d.getrid(this);a("#card_sendtojob").data("rid",h);var g=d.getcat(this);d.cat=g;f.hgsGetJobCards(g,d.dataurl)})},hgsGenJobCards:function(k){var r=document.body.clientWidth;var f="",l=2,e=k.data,m=e.length;var d=0;if(r<1475){f='<div class="card_col card_col1 hgstemp" id="jcard_col1"></div><div class="card_col card_col2 hgstemp" id="jcard_col2"></div>'}else{f='<div class="card_col card_col1 hgstemp" id="jcard_col1"></div><div class="card_col card_col2 hgstemp" id="jcard_col2"></div><div class="card_col card_col3 hgstemp" id="jcard_col3"></div>';l=3}a("#card_jobdata").html(f+"<p class='clr'></p>");a("#card_jobdata").css("width",(l*495-10)+"px");d=m/l;var j=[];j[0]='<div class="card"><p class="top"></p><div class="middle"><a href="javascript:;" class="rightpic" jid="{id}"></a><p><span class="red">[兼职] </span><a href="javascript:;" class="blue">{title}</a></p><p><span class="gray">发布时间: {date}</span></p><p><span class="gray">证书使用地: </span><span>{location}</span></p><p><span class="gray">地区要求: </span><span>{place}</span></p>{cert}</div><p class="bot"></p></div>';j[1]='<div class="card"><p class="top"></p><div class="middle"><a href="javascript:;" class="rightpic" jid="{id}"></a><p><span class="red">[全职] </span><a href="javascript:;" class="blue">{title}</a></p><p><span class="gray">发布时间: {date}</span></p><p><span class="gray">招聘岗位: </span><span>{name}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="gray">招聘人数: </span><span>{count}</span></p><p><span class="gray">工作地点: </span><span>{location}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="gray">学历要求: </span><span>{degree}</span></p>{cert}</div><p class="bot"></p></div>';var i=[],h=[],g=[],q=0,p=0,o=0;a.each(e,function(b,t){var s="";var c=t.category;if(c=="1"){t.temp=1}else{t.temp=0}if(typeof(t.cert)=="undefined"){t.cert=[]}a.each(t.cert,function(u,v){s+="<p>"+v+"</p>"});t.cert=s;if(b<d){i[q]=t;q++}else{if(b<d*2){h[p]=t;p++}else{if(b<d*3){g[o]=t;o++}}}});var n=[];n[0]=["company","date","cert","location","id","place","title"];n[1]=["company","date","cert","degree","location","count","name","place","id","title"];HGS.Base.GenMTemp("jcard_col1",n,i,j);HGS.Base.GenMTemp("jcard_col2",n,h,j);HGS.Base.GenMTemp("jcard_col3",n,g,j);a.hgsSCheckBind();a("div#card_jobdata div.card_col div.card div.middle a.rightpic:eq(0)").addClass("hovered");a("div.job_card").fadeIn(200)},hgsGetJobCards:function(b,d){var c=this;var e={url:d,params:"page=1&&size=20&&status=1&&type="+b,sucrender:c.hgsGenJobCards,failrender:c.hgsGetJobFail};HGS.Base.HAjax(e)},hgsGetJobFail:function(b){alert("对不起,您暂时没有相关职位可以对简历进行邀请")}})})(jQuery);
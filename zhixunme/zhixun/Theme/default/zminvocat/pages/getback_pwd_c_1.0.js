var slpwdRender={a:function(a){baseRender.ai("#email_addr")},b:function(a){baseRender.addred("#email_addr");baseRender.a("#email_addr",LANGUAGE.L0004,"error")},c:function(d){if(d.data.email){var b=d.data.email;HGS.Base.SetCookie("email",b)}else{var a=d.data.phone;HGS.Base.SetCookie("phone",a)}var c=$("div.get_pd  .t_wrap").find("div.get_pd ");$(c).find("a.white").css("color","#fff");$(c).removeClass("btn7").addClass("btn5");$(c).find("a.white").css("cursor","default");document.body.style.cursor="default";window.location.href=d.data.url},d:function(a){alert(a.data);var b=$("div.get_pd  .t_wrap").find("div.act_em ");$(b).find("a.white").css("color","#fff");$(b).removeClass("btn7").addClass("btn5");$(b).find("a.white").css("cursor","default");document.body.style.cursor="default"},e:function(){var a="密码修改成功!";alert(a,"right",true,"",function(){HGS.Base.DelCookie("phone");HGS.Base.DelCookie("token");window.location.href=WEBROOT+"/"})},f:function(){alert("发送成功！");SlpwdController.i(60)},g:function(c){var e=c.data;var b=e.token;var a=HGS.Base.GetCookie("phone");HGS.Base.SetCookie("token",b);window.location.href=WEBROOT+"/reset?phone="+Math.random()},h:function(a){alert("验证码提交失败!")},i:function(){var a=$("div").data("bd");$(a).show();$("a.loading").css("display","none");alert("发送成功！")},j:function(a){var b=$("div").data("bd");$(b).show();$("a.loading").css("display","none");alert(a.data)}};

var SlpwdController={a:function(){baseController.BtnBind(".btn5","btn5","btn5_hov","btn5_click")},b:function(){$("#loginnum").focus(function(){baseRender.b(this)}).blur(function(){var e=$(this).val().replace(new RegExp(" ","g"),"");$(this).val(e);var d="";var a=true;var c=slpwdRender;if(e==""){d=LANGUAGE.L0246;a=false}else{if(/@/.test(e)){if(!/\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/.test(e)){d=LANGUAGE.L0250;a=false}}else{if(!baseRender.d(e)){d=LANGUAGE.L0250;a=false}}}if(!a){baseRender.a(this,d,"error")}else{baseRender.b(this)}});$("#n_pwd").focus(function(){baseRender.a(this,LANGUAGE.L0009,"right")}).blur(function(){var e=$(this).val().replace(new RegExp(" ","g"),"");$(this).val(e);var d="";var c=true;var a=e.length;if(a==0){d=LANGUAGE.L0010;c=false}else{if(a>0&&a<6){d=LANGUAGE.L0011;c=false}else{if(a>16){d=LANGUAGE.L0012;c=false}else{if(!/^[A-Za-z0-9/!/@/#/$/%/^/&/*/_]{4,16}$/.test(e)){d=LANGUAGE.L0013;c=false}}}}if(!c){baseRender.a(this,d,"error")}else{baseRender.ai(this)}});$("#conf_pwd").focus(function(){baseRender.a(this,LANGUAGE.L0016,"right")}).blur(function(){var f=$(this).val().replace(new RegExp(" ","g"),"");$(this).val(f);var e="";var c=true;var d=$("#n_pwd").val();var a=f.length;if(a==0){e=LANGUAGE.L0010;c=false}else{if(f!=d){c=false;e=LANGUAGE.L0017}}if(!c){baseRender.a(this,e,"error")}else{baseRender.ai(this)}})},c:function(){var a=slpwdRender;$("#sen_eadr").click(function(){$("#email_addr,#loginnum").trigger("focus");$("#email_addr,#loginnum").trigger("blur");if($(".get_pd div.tip.error").length==0){$(this).css("color","#aaa");$(this).parent().removeClass("btn5").addClass("btn7");$(this).css("cursor","wait");var c=$("#loginnum").val();var b=new AccountCat();b.GetBackPwd(c,a.c,a.d)}});$("#save_npd").click(function(){var e=$("#n_pwd").val();var c=$("input[name='toke']").val();$("#n_pwd,#conf_pwd").trigger("blur");var b=HGS.Base.GetCookie("phone");if($(".get_pd div.tip.error").length==0){var d=new AccountCat();var f="pword="+e+"&token="+c;if(b){c=HGS.Base.GetCookie("token");f="pword="+e+"&token="+c+"&phone="+b}d.SetNewPwd(f,a.e,a.d)}});$("#re_send").bind("click",function(){if($(this).hasClass("blue")){var b=$("#email").val();$(this).removeClass("blue");var c=new AccountCat();c.ResendFogEmail(b,a.f,a.d)}})},d:function(){$("#loginnum").focus(function(){if($(this).hasClass("gray")){$(this).removeClass("gray");$(this).val("")}}).blur(function(){if(!$(this).val()){$(this).addClass("gray");$(this).val("请输入您的登录邮箱或手机号")}})},f:function(){var a=HGS.Base.GetCookie("email");if(!a.length){window.location.href=WEBROOT+"/error"}else{$("#email").val(a)}},g:function(){var a=HGS.Base.GetCookie("phone");if(!a.length){window.location.href=WEBROOT+"/error"}else{$("#phone").val(a)}},h:function(){$("#indcode").unbind("click").bind("click",function(){var b=ACCOUNTURL.PswPhone;var c=$("#phone").parent().next().find("input.idcode").val();var a=$("#phone").val();var f="token="+c+"&phone="+a;var e=slpwdRender;var d={url:b,params:f,sucrender:e.g,failrender:e.h};HGS.Base.HAjax(d)})},i:function(d){var b;var c=$("#time");$("#re_send").removeClass("blue");var a=function(){if(d<=0){clearTimeout(b);$("#re_send").addClass("blue");return}d--;c.text(d);b=setTimeout(a,1000)};a()},j:function(){$("#re_send").unbind("click").bind("click",function(){if($(this).hasClass("blue")){var b=slpwdRender;var c=$("#phone").val();var a=new AccountCat();a.GetBackPwd(c,b.c,b.d)}})},k:function(){var d={"sdo.com":"m.sdo.com","163.com":"mail.163.com","sina.com.cn":"mail.sina.com.cn","sohu.com":"mail.sohu.com","tom.com":"mail.tom.com","sogou.com":"mail.sogou.com","126.com":"mail.126.com","10086.cn":"mail.10086.cn","gmail.com":"www.gmail.com","hotmail.com":"www.hotmail.com","189.cn":"www.189.cn","vip.qq.com":"mail.qq.com","qq.com":"mail.qq.com","foxmail.com":"mail.qq.com","yahoo.com.cn":"mail.cn.yahoo.com","eyou.com":"www.eyou.com","yahoo.com":"mail.yahoo.com","21cn.com":"mail.21cn.com","188.com":"www.188.com","yeah.net":"www.yeah.net","wo.com.cn":"mail.wo.com.cn","263.net":"www.263.net"};var c=HGS.Base.GetCookie("email");var a=d[c.replace(/.+@/,"")];if(typeof(a)!="undefined"){var b=$("#toemail");b.attr("href","http://"+a);b.parent().removeClass("hidden")}},l:function(){var a=slpwdRender;$("#re_send").bind("click",function(){if($(this).hasClass("blue")){var b=$("#email").val();$("div").data("bd","#re_send");$(this).hide();$("a.loading").css("display","inline-block");var c=new AccountCat();c.ReSendActiveLink(b,a.i,a.j)}})},IniPage:function(){this.a();this.b();this.c();this.d()},IniEmPsw:function(){this.a();this.c();this.f();this.i(60);this.k()},IniPhPsw:function(){this.a();this.g();this.h();this.i(60);this.j()},IniRsend:function(){this.l()}};$().ready(function(){if(typeof(PAGE)=="undefined"){PAGE=""}var a=SlpwdController;if(PAGE=="63"||PAGE=="64"){a.IniPage()}if(PAGE=="65"){a.IniEmPsw()}if(PAGE=="107"){a.IniPhPsw()}if(PAGE=="108"){a.IniRsend()}});
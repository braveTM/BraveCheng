var msgListRender={a:function(b){var a=msgListRender.c(b);MsgListController.a(a)},b:function(a){MsgListController.a(0);$("#all_msg").html("<li class='no-data'>暂无数据!</li>")},c:function(c){var b=c.data;var a=c.count;$.each(b,function(e,f){if(f.read=="0"){f.read="blue"}else{f.read=""}});var d=["url","title","fname","date","read","id"];HGS.Base.GenTemp("all_msg",d,b,TEMPLE.T00017);MsgListController._ta();return a},d:function(){$("html,body").animate({scrollTop:$("#ipost_task").offset().top},500)},o:function(b){var a=$(b).parent().parent().next().find("li input[name='msg_del']");if($(b)[0].checked){a.attr("checked",true)}else{a.attr("checked",false)}},p:function(d,e){var a=$(d).parent().parent().next().find("li input[name='msg_del']");var b=$(d).parent().parent().find("div.f_cl input[name='msg_del_all']");b[0].checked=e;a.attr("checked",e)},r:function(a){alert(a.data)},s:function(a){alert("标记成功!")},sa:function(){var a=$("#ames_ch");var c=$("#smes_ch");var e=$("#pmes_ch");var d=$("#posmes_ch");var b={allmsg:a,sysmsg:c,mymsg:e,sendmsg:d};$.each(b,function(f,g){if(g.parent().hasClass("show")){g.data("data").d.fadeOut()}});alert("消息已删除!")},sb:function(){alert("暂时不能删除消息!")},sc:function(){var a=$("#ipost_task").data("type");if(a==1){MsgListController.b(0)}else{if(a==2){MsgListController.h(0)}else{if(a==3){MsgListController.m(0)}else{if(a==4){MsgListController.q(0)}}}}alert("消息已删除!")}};

var MsgListController={a:function(b){var a=LANGUAGE;$("#pagination").pagination(b,{callback:MsgListController.c,prev_text:a.L0066,next_text:a.L0067,items_per_page:CONSTANT.C0002,num_display_entries:9,current_page:0,num_edge_entries:1,link_to:"javascript:;"})},b:function(a){var b=msgListRender;MsgListController.d(a,"ames","1",b.a,b.b)},c:function(a){var b=msgListRender;MsgListController.d(a,"ames","1",b.c,b.b);b.d()},d:function(f,h,g,e,c){var d=$("#"+h+" a.red");var b="";if(d.length>0){b=d.attr("tp");b=(b==""?"2":b)}f+=1;var j=new Message();j.GetMsgList(f,g,b,e,c)},e:function(){$("#ames a").click(function(){$(this).parent().find("a").removeClass("red");$(this).addClass("red");MsgListController.b(0);msgListRender.d()})},s:function(){$("input[name='msg_del_all']").click(function(){msgListRender.o(this)});$("div.module_3 div.mcols_sctitle div.s_cl a.chsall").click(function(){msgListRender.p(this,true)});$("div.module_3 div.mcols_sctitle div.s_cl a.chsnone").click(function(){msgListRender.p(this,false)})},t:function(){$("div.module_3 div.mcols_sctitle div.s_cl a.markread_cont").click(function(){var b=$(this).parent().parent().next().find("li input:checked");var d="";var a=b.length;$.each(b,function(f,h){var g=$(h).parent().next().find("a");if(g.hasClass("blue")){if(f==0){d+=$(h).attr("mid")}else{d+=","+$(h).attr("mid")}g.removeClass("blue")}});if(d!=""){var e=msgListRender;var c=new Message();c.MarkRead(d,e.s,e.r)}else{if(a>0){alert(LANGUAGE.L0128)}else{alert(LANGUAGE.L0215)}}})},ta:function(){var b=$("#ames_ch");var a={allmsg:{a:b,b:"all_msg"}};$.each(a,function(c,d){d.a.children(".del").unbind("click").bind("click",function(){MsgListController.tb(d.b);MsgListController.te($(this))})})},_ta:function(){var a={allmsg:"all_msg"};$.each(a,function(b,c){$("#"+c).find("a.del").unbind("click").bind("click",function(){MsgListController.tc($(this),$("#"+c))})})},tb:function(c){var a=$("#"+c).find("input[name='msg_del']:checked");var b=new Array();if(!a.length){alert("请选择要删除的消息!")}else{a.each(function(){b.push($(this).attr("mid")*1)});$("#"+c).prev().data("data",{d:a.parent().parent()});MsgListController.td(b,1)}},tc:function(b,c){var a=b.parent().children().first().find("input[type='checkbox']");c.prev().data("data",{d:b.parent()});var d=a.attr("mid")*1;MsgListController.td(d)},td:function(c,g){var a=confirm("确定要删除消息?");if(a){var e="ids="+c;var d=msgListRender;var f=d.sa;if(g==1){f=d.sc}var b={url:WEBURL.DelMsgList,params:e,sucrender:f,failrender:d.sb};HGS.Base.HAjax(b)}},te:function(b){var a,c,d;a=b.attr("rel");if(b.hasClass("_p")){c=b.parent().nextAll(".pages").find("span.current").not("span.prev").not("span.next")}d=c.text();$("#ipost_task").data({type:a,page:d})},IniPage:function(){baseRender.ae(0);this.b(0);this.e();this.s();this.t();this.ta()}};$().ready(function(){if(typeof(PAGE)=="undefined"){PAGE=""}if(PAGE=="12"){MsgListController.IniPage()}});
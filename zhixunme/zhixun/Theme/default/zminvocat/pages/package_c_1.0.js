var packageRender={a:function(a){alert("购买成功!","","","",function(){location.href=WEBROOT+"/mpackage/0"})},b:function(a){$("#suretobuy").removeClass("clicked");$("#suretorenew").removeClass("clicked");packageController.d()},c:function(a){alert("续费成功!","","","",function(){var b=(new Date()).getTime();location.href=WEBROOT+"/mpackage/?suc="+b})},d:function(a){$("#chr_res").html(a.data)},e:function(a){alert(a.data)},ea:function(a){$("#rechange").removeClass("clicked");$("#rechange").removeClass("clicked");alert(a.data)},f:function(a){alert("续费成功!")},g:function(a){packageController.d()},h:function(d){var c=d.data;var a=$("#schr_item");var e=a.parent().parent().next();var b=a.val();a.next().html(c[0]);e.find("td span.gray").html(c[1]);if(b=="8"){e.find("td.ltd").html("充值金额 :");$("#chr_res").text("请输入充值金额!")}else{e.find("td.ltd").html("续费个数 :");$("#scr_use").next().next().fadeIn();$("#scr_use").val("");$("#phone_cz").replaceWith("");if($("#scr_use").hasClass("hidden")){$("#scr_use").removeClass("hidden");$("#scr_use").next(".unit").fadeIn(10)}$("#chr_res").text("请输入续费个数!");e.find("td span.unit").text("个");packageController.g()}},i:function(a){alert("恭喜您兑换套餐成功!","","","",function(){location.href=WEBROOT+"/mpackage/0"})},j:function(a){$("#change").removeClass("clicked");$("#change").removeClass("clicked");alert(a.data)}};
var packageController={a:function(){$("#pac_items a.buynow").click(function(){var a=LANGUAGE;var c=this;var b;if(PAGE==119){b=a.L0216.replace("{score}",$(this).parent().parent().find("div.mid_bg div.mid p.score span em.red").text())}else{b=a.L0216.replace("{score}",$(this).parent().parent().find("div.mid_bg div.mid p.score span").text())}baseController.InitialSureDialog("error",b,"suretobuy",a.L0217);$("#suretobuy").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");var d=$(c).attr("pid");var e=packageRender;var f=new Bill();f.BuyPackage(d,e.a,e.b);$(this).parent().parent().parent().parent().parent().parent().fadeOut(200)}});$("#suretobuy").parent().parent().next().click(function(){$("#suretobuy").removeClass("clicked");$(c).removeClass("clicked")})})},b:function(){$("#pac_items a.renew,#fcharge_now").click(function(){var a=LANGUAGE;var d=this;var c;if(PAGE==119){c=$(this).parent().parent().find("div.mid_bg div.mid p.score span em.red").text()}else{c=$(this).parent().parent().find("div.mid_bg div.mid p.score span").text()}c=(!!c?c:$(this).attr("score"));var b=a.L0218.replace("{score}",c);baseController.InitialSureDialog("error",b,"suretorenew",a.L0219);$("#suretorenew").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");var e=packageRender;var f=new Bill();f.RenewPackage(e.c,e.b);$(this).parent().parent().parent().parent().parent().parent().fadeOut(200)}});$("#suretorenew").parent().parent().next().click(function(){$("#suretorenew").removeClass("clicked");$(d).removeClass("clicked")})})},ba:function(){$("#pac_items a.rechange").click(function(){var a=LANGUAGE;var d=this;var c=$(this).parent().parent().find("div.mid_bg div.mid p.score span em.red").text().replace("￥","");c=(!!c?c:$(this).attr("score"));var b=a.L0253.replace("{score}",c);baseController.InitialSureDialog("error",b,"rechange",a.L0252);$("#rechange").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");var e=packageRender;var f=new Bill();f.RechangePackage(e.c,e.ea);$(this).parents("div.sure_dialog").fadeOut(200)}});$("#rechange").parent().parent().next().click(function(){$("#rechange").removeClass("clicked");$(d).removeClass("clicked")})})},c:function(){var a=$("#pac_items");a.find("li.loading").remove();a.find("li").css("opacity","1")},d:function(){baseController.InitialSureDialog("error",LANGUAGE.L0229,"chargescore","立即充值");$("#chargescore").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");location.href=WEBROOT+"/bill/"}});$("#chargescore").parent().parent().next().click(function(){$("#chargescore").removeClass("clicked")})},e:function(){$("#filter_rec input[name=rechr]").click(function(){var a=$(this).attr("id").substring(5);var b=$("div.package div.pstat div.rechr_item");b.not("div.hidden").addClass("hidden");b.eq(a).removeClass("hidden")})},f:function(){$("#scharge_now").click(function(){var d=$("#scr_use");d.trigger("blur");if($("table.sin_rechr .error").length==0){var c=LANGUAGE;var f=this;var a=d.val();var e=c.L0218.replace("{score}",parseInt(a,10)*parseInt(d.next().next().find("em").text(),10));baseController.InitialSureDialog("error",e,"suretorenew",c.L0219);$("#suretorenew").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");var b=$("#schr_item").val();var h=new Bill();var g=packageRender;h.RSChrRes(b,a,g.f,g.g);$(this).parent().parent().parent().parent().parent().parent().fadeOut(200)}});$("#suretorenew").parent().parent().next().click(function(){$("#suretorenew").removeClass("clicked");$(f).removeClass("clicked")})}})},g:function(){$("#scr_use").focus(function(){baseRender.b(this)}).blur(function(){var f="";var g=true;var e=$(this).val().replace(new RegExp(" ","g"),"");if(e==""){f=LANGUAGE.L0244;g=false}else{if(!/^(\-?)(\d+)$/.test(e)){f=LANGUAGE.L0245;g=false}}if(g){baseRender.b(this);var b=$("#schr_item").val();var d=new Bill();var c=packageRender;d.GetSChrRes(b,e,c.d,c.e)}else{baseRender.a(this,f,"error",10)}});$("#scr_use").bind("keyup",function(){var d=$("#schr_item").val(),c=$(this).val();if(!!c){var f=new Bill();var e=packageRender;f.GetSChrRes(d,c,e.d,e.e)}})},i:function(){$("#pac_items a.srenew").click(function(){baseRender.TabChange($("div.sm_tab ul li:eq(0)"));$("#filter_rec input[name=rechr]:eq(0)").trigger("click");$("html,body").animate({scrollTop:$("#filter_rec").offset().top-60},500)})},j:function(){$("#schr_item").change(function(){$("#scr_use").nextAll("div.tip").remove();var b=$(this).val();var c=packageRender;var d=new Bill();d.GetSChrTips(b,c.h,null)});$("#schr_item").trigger("change")},h:function(){$("#pac_items a.change").click(function(){var a=LANGUAGE;var d=this;var c=$(this).parent().parent().find("div.mid_bg div.mid p.score span em.red").text().replace("￥","");var b=a.L0251.replace("{score}",c);baseController.InitialSureDialog("error",b,"change",a.L0252);$("#change").unbind("click").bind("click",function(){if(!$(this).hasClass("clicked")){$(this).addClass("clicked");var e=$(d).attr("pid");var f=packageRender;var g=new Bill();g.ChangePackage(e,f.i,f.j);$(this).parents("div.sure_dialog").fadeOut(200)}});$("#change").parent().parent().next().click(function(){$("#change").removeClass("clicked");$(d).removeClass("clicked")})})},iniPage:function(){baseRender.ae(0);this.c();this.a();this.b();this.e();this.g();this.j();this.f();this.i()},iniPage1:function(){this.ba();this.h()}};$().ready(function(){if(typeof(PAGE)=="undefined"){PAGE=""}if(PAGE=="25"){packageController.iniPage()}if(PAGE=="119"){packageController.iniPage();packageController.iniPage1()}});